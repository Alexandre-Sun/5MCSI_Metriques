
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', { 'packages': ['bar'] });
      google.charts.setOnLoadCallback(fetchWeatherData);

      function fetchWeatherData() {
        fetch('/tawarano/')
          .then(response => response.json())
          .then(data => {
            drawChart(data);
          })
      }

      function drawChart(apiData) {
        const chartData = [['Date', 'Température Min (°C)', 'Température Max (°C)']];
        apiData.forEach(day => {
          chartData.push([day.date, day.temp_min, day.temp_max]);
        });

        const data = google.visualization.arrayToDataTable(chartData);

        const options = {
          width: 800,
          legend: { position: 'top' },
          chart: {
            title: 'Prévisions météo de Tawarano',
            subtitle: 'Températures minimales et maximales sur plusieurs jours'
          },
          axes: {
            x: {
              0: { side: 'bottom', label: 'Dates' }
            }
          },
          bar: { groupWidth: "75%" }
        };

        const chart = new google.charts.Bar(document.getElementById('weather_chart_div'));
        chart.draw(data, google.charts.Bar.convertOptions(options));
      }
    </script>
  </head>
  <body>
    <div id="weather_chart_div" style="width: 800px; height: 600px;"></div>
  </body>
</html>
